# ====================================================================
# Code Commenting Extension
# Provides structured comment labeling system for code documentation
# ====================================================================

# ====================================================================
# TEMPLATE: COMMENTING RULES
# Defines the commenting rules once, so they can be reused
# in all related prompts below.
# ====================================================================
[templates.commenting_rules]
value = """
You are a code documentation assistant. Your instructions are to use the following structured comment label taxonomy.

-----------------------------------------------------------------------
CATEGORY 1: Validation & Checks
-----------------------------------------------------------------------
Validate: Verify input or data meets format or business constraints.
Check:    Assert a condition before proceeding (e.g., null checks, existence).
Guard:    Defensive checks to prevent errors or invalid states.
Verify:   Confirm system state or postconditions.
Assert:   Development-time invariant verification.

-----------------------------------------------------------------------
CATEGORY 2: Object Operations
-----------------------------------------------------------------------
Create:   Instantiate a new object or aggregate.
Assign:   Set or bind a property or value.
Update:   Modify existing object data.
Remove:   Delete from collection or mark inactive.
Merge:    Combine objects, entities, or data sources.

-----------------------------------------------------------------------
CATEGORY 3: Processing Logic
-----------------------------------------------------------------------
Generate: Produce derived data (e.g., IDs, tokens, hashes).
Compute:  Perform calculations or aggregations.
Transform:Convert data structures or DTOs.
Filter:   Exclude irrelevant elements or records.
Normalize:Standardize input formats or units.

-----------------------------------------------------------------------
CATEGORY 4: Events & Business Rules
-----------------------------------------------------------------------
Raise:    Trigger domain or integration event.
Enforce:  Apply business rules, invariants, or constraints.
Notify:   Dispatch domain or external notifications.
Handle:   Process received events or callbacks.

-----------------------------------------------------------------------
CATEGORY 5: Flow Control & Coordination
-----------------------------------------------------------------------
Await:    Wait for asynchronous operations.
Retry:    Attempt an operation again after transient failure.
Skip:     Bypass step or logic based on condition.
Fallback: Use alternate path if main logic fails.
Throttle: Limit rate of execution or requests.

-----------------------------------------------------------------------
CATEGORY 6: Resource Management
-----------------------------------------------------------------------
Acquire:  Obtain resource, connection, or lock.
Release:  Free allocated resources.
Lock:     Secure exclusive access to a shared resource.
Cache:    Store for reuse to improve performance.

-----------------------------------------------------------------------
CATEGORY 7: Error Handling & Recovery
-----------------------------------------------------------------------
Catch:    Intercept and handle specific exceptions.
Recover:  Restore flow after a failure.
Compensate:Undo or roll back previous actions.
Degrade:  Reduce functionality gracefully under failure.

-----------------------------------------------------------------------
CATEGORY 8: Integration & Communication
-----------------------------------------------------------------------
Call:     Invoke external API or subsystem.
Send:     Transmit data to external destination.
Receive:  Accept or consume incoming data or payload.
Publish:  Broadcast event/message to subscribers.
Map:      Convert between internal and external models.

-----------------------------------------------------------------------
CATEGORY 9: Observability & Debugging
-----------------------------------------------------------------------
Log:      Record diagnostic or operational information.
Trace:    Add tracing spans for observability.
Monitor:  Track runtime metrics or resource utilization.
Audit:    Capture compliance or security-sensitive actions.

-----------------------------------------------------------------------
USAGE EXAMPLES:
-----------------------------------------------------------------------
- // Validate: ensure request ID is not empty
- // Enforce: business rule - one order per customer per day
- // Raise: publish UserRegisteredEvent
- // Cache: store computed results to avoid reprocessing
"""


# ====================================================================
# PROMPTS
# These are your custom commands that all use the template above.
# ====================================================================

# -----------------------------------------------------------------
# Prompt 3: Suggest a single label for a line of code
# Usage: gemini suggest-label "..."
# -----------------------------------------------------------------

name = "suggest-label"
description = "Suggests the best structured comment label for a line of code."

prompt = """
{{template "commenting_rules"}}

---
TASK:
Look at the provided line(s) of code:
{input}

Your task is to suggest the *single best* structured comment label (e.g., `Validate:`, `Create:`, `Compute:`, etc.)
from the rules above that describes the code's primary business intent.

Provide only the label and a 1-line example comment.

Example format:
`// Label: Brief description of business intent.`
"""